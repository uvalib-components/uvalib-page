<link rel="import" href="../uvalib-theme/uvalib-ui-element.html">
<link rel="import" href="../paper-card/paper-card.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">
<link rel="import" href="../uvalib-theme/uvalib-page-style.html">
<link rel="import" href="../uvalib-theme/uvalib-card-style.html">
<link rel="import" href="../uvalib-banner/uvalib-banner.html">

<dom-module id="uvalib-homepage">
  <template>
    <custom-style>
      <style include="uvalib-theme uvalib-page-style iron-flex iron-flex-factors uvalib-card-style">
        :host {
          display: block;
        }
        #banner {
          width: 100vw;
          margin: 0 -1em;
          overflow: hidden;
          height: 230px;
        }
        [medium-screen] #banner {
          height: 230px;
        }
        #hours-card {
          min-height: 330px;
        }
      </style>
    </custom-style>

    <!-- Banner at top outside of card if not large screen -->
    <template is="dom-if" if="[[!largeScreen]]">
      <div>
        <uvalib-banner id="banner" tabindex="-1"></uvalib-banner>
      </div>

      <!-- Stick hours and research in w/ white background if not large -->
      <div class="layout horizontal wrap">
        <paper-card class="flex" id="hours-card" heading="Today's Hours">
          <div class="card-content full-card">
            <uvalib-hours-ui single-day></uvalib-hours-ui>
          </div>
          <div class="card-actions">
            <a href="/hours" tabindex="-1">
              <paper-button>View All Hours ⟶</paper-button>
            </a>
          </div>
        </paper-card>
        <paper-card id="research" class="flex" heading="Research" image="/files/cards/research.jpg" alt="Image of student doing research in the Library">
          <div class="card-content">
            <ul>
              <li><a href="https://search.lib.virginia.edu">Virgo: Library Catalog</a></li>
              <li><a href="https://guides.lib.virginia.edu/az.php">Databases A-Z</a></li>
              <li><a href="/research/">Subject guides</a></li>
              <li><a href="http://guides.lib.virginia.edu/journalfinder">Journal finder</a></li>
              <li><a href="/services/search-course-reserves/">Search course reserves</a></li>
              <li><a href="http://data.library.virginia.edu/research-software/">Research software</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="/research">
              <paper-button>More Research Tools</paper-button>
            </a>
          </div>
        </paper-card>
      </div>
      <div class="shady layout horizontal wrap">
        <paper-card id="spaces" class="flex" heading="Spaces &amp; Equipment" image="/files/cards/spaces.jpg" alt="Student studying in an egg.">
          <div class="card-content">
            <ul>
              <li><a href="/map/#!/study/">Find study spaces</a></li>
              <li><a href="/policies/">Using the library - policies </a></li>
              <li><a href="/print-copy-scan-computing/">Printers &amp; scanning</a></li>
              <li><a href="/services/reserve-equipment-computers/">Borrow equipment</a></li>
              <li><a href="/services/reserve-rooms/">Reserve a room</a></li>
              <li><a href="/services/digital-labs/">Digital labs</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="http://static.lib.virginia.edu/directory/libraries.html">
              <paper-button>Explore libraries &amp; labs</paper-button>
            </a>
          </div>
        </paper-card>
        <paper-card id="services" class="flex" heading="Services" image="/files/cards/services.jpg" alt="Librarian giving a presentation on a digital display.">
          <div class="card-content">
            <ul>
              <li><a href="/services/ils/">LEO and Interlibrary Loan (ILL)</a></li>
              <li><a href="http://guides.lib.virginia.edu/subjectlibrarians">Subject librarians</a></li>
              <li><a href="/services/purchase-requests/">Purchase request</a></li>
              <li><a href="/services/off-grounds-access/">Off-Grounds access</a></li>
              <li><a href="/services/accessibility-services/">Accessibility Services </a></li>
              <li><a href="/services/classes/">Library class request</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="https://library.virginia.edu/services">
              <paper-button>More Services</paper-button>
            </a>
          </div>
        </paper-card>
      </div>
      <div class="layout vertical">
        <paper-card id="events" heading="Upcoming Events" style="max-width:100%">
          <div class="card-content">
            <uvalib-events-ui max-num-events-shown="3"></uvalib-events-ui>
          </div>
          <div class="card-actions">
           <a tabindex="-1" href="http://cal.lib.virginia.edu/calendar/events">
             <paper-button>View All Events</paper-button>
           </a>
          </div>
        </paper-card>
        <paper-card is="news" heading="Library News" style="max-width:100%">
          <div class="card-content">
            <uvalib-news-section num-items="3"></uvalib-news-section>
          </div>
          <div class="card-actions">
           <a tabindex="-1" href="http://news.library.virginia.edu">
             <paper-button>More News</paper-button>
           </a>
          </div>
        </paper-card>
      </div>
    </template>





    <template is="dom-if" if="[[largeScreen]]">
      <!-- Desktop has Banner next to hours card -->
      <div class="layout horizontal">
        <paper-card class="flex layout vertical" style="width: 200px; max-width: none; min-width: none;">
          <div class="card-content flex" style="overflow: hidden; padding:0; margin:0">
            <uvalib-banner id="bannerLg" style="height:100%;width:100%;" tabindex="-1"></uvalib-banner>
          </div>
        </paper-card>
        <paper-card id="hours-card" heading="Today's Hours" style="width: 200px; max-width: none; min-width: none;">
          <div class="card-content full-card">
            <uvalib-hours-ui single-day></uvalib-hours-ui>
          </div>
          <div class="card-actions">
            <a href="/hours" tabindex="-1">
              <paper-button>View All Hours ⟶</paper-button>
            </a>
          </div>
        </paper-card>
      </div>
      <!-- then shady area with research, spaces, and services -->
      <div class="shady layout horizontal">
        <paper-card id="research" heading="Research" class="flex" image="/files/cards/research.jpg" alt="Image of student doing research in the Library">
          <div class="card-content">
            <ul>
              <li><a href="https://search.lib.virginia.edu">Virgo: Library Catalog</a></li>
              <li><a href="https://guides.lib.virginia.edu/az.php">Databases A-Z</a></li>
              <li><a href="/research/">Subject guides</a></li>
              <li><a href="http://guides.lib.virginia.edu/journalfinder">Journal finder</a></li>
              <li><a href="/services/search-course-reserves/">Search course reserves</a></li>
              <li><a href="http://data.library.virginia.edu/research-software/">Research software</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="/research">
              <paper-button>More Research Tools</paper-button>
            </a>
          </div>
        </paper-card>
        <paper-card id="spaces" class="flex" heading="Spaces &amp; Equipment" image="/files/cards/spaces.jpg" alt="Student studying in an egg.">
          <div class="card-content">
            <ul>
              <li><a href="/map/#!/study/">Find study spaces</a></li>
              <li><a href="/policies/">Using the library - policies </a></li>
              <li><a href="/print-copy-scan-computing/">Printers &amp; scanning</a></li>
              <li><a href="/services/reserve-equipment-computers/">Borrow equipment</a></li>
              <li><a href="/services/reserve-rooms/">Reserve a room</a></li>
              <li><a href="/services/digital-labs/">Digital labs</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="http://static.lib.virginia.edu/directory/libraries.html">
              <paper-button>Explore libraries &amp; labs</paper-button>
            </a>
          </div>
        </paper-card>
        <paper-card id="services" class="flex" heading="Services" image="/files/cards/services.jpg" alt="Librarian giving a presentation on a digital display.">
          <div class="card-content">
            <ul>
              <li><a href="/services/ils/">LEO and Interlibrary Loan (ILL)</a></li>
              <li><a href="http://guides.lib.virginia.edu/subjectlibrarians">Subject librarians</a></li>
              <li><a href="/services/purchase-requests/">Purchase request</a></li>
              <li><a href="/services/off-grounds-access/">Off-Grounds access</a></li>
              <li><a href="/services/accessibility-services/">Accessibility Services </a></li>
              <li><a href="/services/classes/">Library class request</a></li>
            </ul>
          </div>
          <div class="card-actions">
            <a tabindex="-1" href="https://library.virginia.edu/services">
              <paper-button>More Services</paper-button>
            </a>
          </div>
        </paper-card>
      </div>
      <div class="layout horizontal">
        <paper-card class="flex" id="events" heading="Upcoming Events">
          <div class="card-content">
            <uvalib-events-ui max-num-events-shown="3"></uvalib-events-ui>
          </div>
          <div class="card-actions">
           <a tabindex="-1" href="http://cal.lib.virginia.edu/calendar/events">
             <paper-button>View All Events</paper-button>
           </a>
          </div>
        </paper-card>
        <paper-card class="flex" is="news" heading="Library News">
          <div class="card-content">
            <uvalib-news-section num-items="3"></uvalib-news-section>
          </div>
          <div class="card-actions">
           <a tabindex="-1" href="http://news.library.virginia.edu">
             <paper-button>More News</paper-button>
           </a>
          </div>
        </paper-card>
      </div>
    </template>

    <div class="shady layout horizontal wrap">
      <paper-card id="exhibit" heading="Exhibition Spotlight" image="/files/cards/100obj.gif" alt="The University of Virginia in one hundred objects">
        <div class="card-content">
          <p><em>The University of Virginia in 100 Objects</em>, a Bicentennial exhibition celebrating the history of the University on display through June 2018.</p>
        </div>
        <div class="card-actions">
          <a tabindex="-1" href="http://100objects.lib.virginia.edu/">
            <paper-button>Read More</paper-button>
          </a>
        </div>
      </paper-card>
      <paper-card id="support" heading="Spaces &amp; Equipment" image="/files/cards/engage.jpg" alt="Students studying in the Library">
        <div class="card-content">
          <ul>
            <li><a href="/jobs">Volunteer Opportunities</a></li>
            <li><a href="/services/alumni">Alumni Services</a></li>
            <li><a href="/services/community-patrons">Community Patrons</a></li>
          </ul>
        </div>
        <div class="card-actions">
          <a tabindex="-1" href="http://www.library.virginia.edu/support/">
            <paper-button>Learn More</paper-button>
          </a>
        </div>
      </paper-card>
    </div>

  </template>

  <script>
    /**
     * `uvalib-homepage`
     * UVA Library page layout component
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class UvalibHomepage extends UvalibUiElement {
      static get is() { return 'uvalib-homepage'; }
      static get properties() {
        return Object.assign(super.properties,{

        });
      }
      //Concat the this elements template with the parents
      static get template() {
        var parentTemplate = UvalibUiElement.template.cloneNode(true);
        var childTemplate = Polymer.DomModule.import('uvalib-homepage', 'template');
        parentTemplate.content.insertBefore(childTemplate.content,null);
        return parentTemplate;
      }
      setBannerFocus() {
        console.log('banner focus');
        if (this.largeScreen) {
          this.$.bannerLg.focus();
        } else {
          this.$.banner.focus();
        }
      }
    }

    window.customElements.define(UvalibHomepage.is, UvalibHomepage);
  </script>
</dom-module>
