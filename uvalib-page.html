<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../uvalib-analytics/uvalib-analytics.html">
<link rel="import" href="../uvalib-header/uvalib-header.html">
<link rel="import" href="../uvalib-footer/uvalib-footer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">
<link rel="import" href="../app-layout/app-drawer/app-drawer.html">

<!--
`uvalib-page`
Library Web Page template

@demo demo/index.html
-->

<dom-module id="uvalib-page">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <iron-media-query query="(max-width: 600px)" query-matches="{{_smallScreen}}"></iron-media-query>
    <iron-media-query query="(min-width: 600px) and (max-width: 992px)" query-matches="{{_mediumScreen}}"></iron-media-query>

    <uvalib-header screen-size="{{screenSize}}" on-togglemenu="_toggleDrawer"></uvalib-header>

    <!-- Lazy-create the drawer for small screen sizes. -->
    <template is="dom-if" if="{{_smallScreen}}">
      <!-- Two-way bind `drawerOpened` since app-drawer can update `opened` itself. -->
      <app-drawer opened="{{drawerOpened}}" swipe-open tabindex="0">
        Hello
      </app-drawer>
    </template>

    <div class="content"><content></content></div>

    <uvalib-footer></uvalib-footer>

    <!-- Library Site Analytics -->
    <uvalib-analytics site-id="10"></uvalib-analytics>
  </template>

  <script>
    Polymer({

      is: 'uvalib-page',

      properties: {
        _smallScreen: Boolean,
        _mediumScreen: Boolean,
        screenSize: {
          type: String,
          value: 'large',
          notify: true,
          readOnly: true
        },
      },
      observers: [
        '_updateScreenSize(_smallScreen,_mediumScreen)'
      ],
      _toggleDrawer: function() {
        this.drawerOpened = !this.drawerOpened;
      },
      _updateScreenSize: function() {
        this._setScreenSize(
          (this._smallScreen)?'small':
                              (this._mediumScreen)?'medium':
                                                   'large'
        );
      }
    });
  </script>
</dom-module>
