<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../uvalib-analytics/uvalib-analytics.html">
<link rel="import" href="../uvalib-header/uvalib-header.html">
<link rel="import" href="../uvalib-nav/uvalib-nav.html">
<link rel="import" href="../uvalib-footer/uvalib-footer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">
<link rel="import" href="../app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../platinum-https-redirect/platinum-https-redirect.html">

<!--
`uvalib-page`
Library Web Page template

@demo demo/index.html
-->

<dom-module id="uvalib-page">
  <template>
    <style>
      :host {
        display: block;
      }
      uvalib-header {
        z-index: 1000
      }
    </style>

    <platinum-https-redirect></platinum-https-redirect>
    <iron-media-query query="(max-width: 600px)" query-matches="{{_smallScreen}}"></iron-media-query>
    <iron-media-query query="(min-width: 600px) and (max-width: 992px)" query-matches="{{_mediumScreen}}"></iron-media-query>

    <uvalib-header screen-size="{{screenSize}}" on-togglemenu="_toggleDrawer" navigation="{{navigation}}"></uvalib-header>

    <!-- Lazy-create the drawer for small screen sizes. -->
    <template is="dom-if" if="{{_smallScreen}}">
      <!-- Two-way bind `drawerOpened` since app-drawer can update `opened` itself. -->
      <app-drawer opened="{{drawerOpened}}" swipe-open tabindex="0">
        <uvalib-nav stacked navigation="{{navigation}}"></uvalib-nav>
      </app-drawer>
    </template>

    <div class="content"><content></content></div>

    <uvalib-footer></uvalib-footer>

    <!-- Library Site Analytics -->
    <uvalib-analytics site-id="10"></uvalib-analytics>
  </template>

  <script>
    Polymer({

      is: 'uvalib-page',

      properties: {
        /**
         * Array of JSON items that represent the navigation. Each JSON item has a label property, an icon property, and a url property.
         */
        navigation: {
          type: Array,
          value: [
            {"label": "About", "icon": "university", "url": "//www.library.virginia.edu/about/"},
            {"label": "Research", "icon": "graduation-cap", "url": "//www.library.virginia.edu/research/"},
            {"label": "Collections", "icon": "book", "url": "//www.library.virginia.edu/collections/"},
            {"label": "Services", "icon": "cloud", "url": "//www.library.virginia.edu/services/"}
          ],
        },
        _smallScreen: Boolean,
        _mediumScreen: Boolean,
        screenSize: {
          type: String,
          value: 'large',
          notify: true,
          readOnly: true
        },
      },
      observers: [
        '_updateScreenSize(_smallScreen,_mediumScreen)'
      ],
      _toggleDrawer: function() {
        this.drawerOpened = !this.drawerOpened;
      },
      _updateScreenSize: function() {
        this._setScreenSize(
          (this._smallScreen)?'small':
                              (this._mediumScreen)?'medium':
                                                   'large'
        );
      }
    });
  </script>
</dom-module>
